import Database from"./database.js";function noop(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let src_url_equal_anchor,current_component;function src_url_equal(e,t){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=t,e===src_url_equal_anchor.href}function is_empty(e){return 0===Object.keys(e).length}function action_destroyer(e){return e&&is_function(e.destroy)?e.destroy:noop}function append(e,t){e.appendChild(t)}function insert(e,t,n){e.insertBefore(t,n||null)}function detach(e){e.parentNode.removeChild(e)}function element(e){return document.createElement(e)}function text(e){return document.createTextNode(e)}function listen(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function attr(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function set_data(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function set_input_value(e,t){e.value=null==t?"":t}function set_style(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}function set_current_component(e){current_component=e}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(e){render_callbacks.push(e)}let flushing=!1;const seen_callbacks=new Set;function flush(){if(!flushing){flushing=!0;do{for(let e=0;e<dirty_components.length;e+=1){const t=dirty_components[e];set_current_component(t),update(t.$$)}for(set_current_component(null),dirty_components.length=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const t=render_callbacks[e];seen_callbacks.has(t)||(seen_callbacks.add(t),t())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,flushing=!1,seen_callbacks.clear()}}function update(e){if(null!==e.fragment){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}const outroing=new Set;function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}const globals="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function destroy_block(e,t){e.d(1),t.delete(e.key)}function update_keyed_each(e,t,n,o,a,r,i,s,c,l,d,u){let p=e.length,m=r.length,h=p;const f={};for(;h--;)f[e[h].key]=h;const _=[],b=new Map,g=new Map;for(h=m;h--;){const e=u(a,r,h),s=n(e);let c=i.get(s);c?o&&c.p(e,t):(c=l(s,e),c.c()),b.set(s,_[h]=c),s in f&&g.set(s,Math.abs(h-f[s]))}const y=new Set,k=new Set;function v(e){transition_in(e,1),e.m(s,d),i.set(e.key,e),d=e.first,m--}for(;p&&m;){const t=_[m-1],n=e[p-1],o=t.key,a=n.key;t===n?(d=t.first,p--,m--):b.has(a)?!i.has(o)||y.has(o)?v(t):k.has(a)?p--:g.get(o)>g.get(a)?(k.add(o),v(t)):(y.add(a),p--):(c(n,i),p--)}for(;p--;){const t=e[p];b.has(t.key)||c(t,i)}for(;m;)v(_[m-1]);return _}function mount_component(e,t,n,o){const{fragment:a,on_mount:r,on_destroy:i,after_update:s}=e.$$;a&&a.m(t,n),o||add_render_callback((()=>{const t=r.map(run).filter(is_function);i?i.push(...t):run_all(t),e.$$.on_mount=[]})),s.forEach(add_render_callback)}function destroy_component(e,t){const n=e.$$;null!==n.fragment&&(run_all(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function make_dirty(e,t){-1===e.$$.dirty[0]&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init(e,t,n,o,a,r,i,s=[-1]){const c=current_component;set_current_component(e);const l=e.$$={fragment:null,ctx:null,props:r,update:noop,not_equal:a,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:t.context||[]),callbacks:blank_object(),dirty:s,skip_bound:!1,root:t.target||c.$$.root};i&&i(l.root);let d=!1;l.ctx=n?n(e,t.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return l.ctx&&a(l.ctx[t],l.ctx[t]=r)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](r),d&&make_dirty(e,t)),n})):[],l.update(),d=!0,run_all(l.before_update),l.fragment=!!o&&o(l.ctx),t.target&&(l.fragment&&l.fragment.c(),t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor,t.customElement),flush()),set_current_component(c)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const allGroups=[[-1,"‚ú®","custom"],[0,"üòÄ","smileys-emotion"],[1,"üëã","people-body"],[3,"üê±","animals-nature"],[4,"üçé","food-drink"],[5,"üè†Ô∏è","travel-places"],[6,"‚öΩ","activities"],[7,"üìù","objects"],[8,"‚õîÔ∏è","symbols"],[9,"üèÅ","flags"]].map((([e,t,n])=>({id:e,emoji:t,name:n}))),groups=allGroups.slice(1),customGroup=allGroups[0],MIN_SEARCH_TEXT_LENGTH=2,NUM_SKIN_TONES=6,rIC="function"==typeof requestIdleCallback?requestIdleCallback:setTimeout;function hasZwj(e){return e.unicode.includes("‚Äç")}const versionsAndTestEmoji={"ü´†":14,"ü•≤":13.1,"ü•ª":12.1,"ü•∞":11,"ü§©":5,"üë±‚Äç‚ôÄÔ∏è":4,"ü§£":3,"üëÅÔ∏è‚Äçüó®Ô∏è":2,"üòÄ":1,"üòêÔ∏è":.7,"üòÉ":.6},TIMEOUT_BEFORE_LOADING_MESSAGE=1e3,DEFAULT_SKIN_TONE_EMOJI="üñêÔ∏è",DEFAULT_NUM_COLUMNS=8,MOST_COMMONLY_USED_EMOJI=["üòä","üòí","‚ô•Ô∏è","üëçÔ∏è","üòç","üòÇ","üò≠","‚ò∫Ô∏è","üòî","üò©","üòè","üíï","üôå","üòò"],FONT_FAMILY='"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Twemoji Mozilla","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',DEFAULT_CATEGORY_SORTING=(e,t)=>e<t?-1:e>t?1:0,getTextFeature=(e,t)=>{const n=document.createElement("canvas");n.width=n.height=1;const o=n.getContext("2d");return o.textBaseline="top",o.font=`100px ${FONT_FAMILY}`,o.fillStyle=t,o.scale(.01,.01),o.fillText(e,0,0),o.getImageData(0,0,1,1).data},compareFeatures=(e,t)=>{const n=[...e].join(",");return n===[...t].join(",")&&!n.startsWith("0,0,0,")};function testColorEmojiSupported(e){const t=getTextFeature(e,"#000"),n=getTextFeature(e,"#fff");return t&&n&&compareFeatures(t,n)}function determineEmojiSupportLevel(){const e=Object.entries(versionsAndTestEmoji);try{for(const[t,n]of e)if(testColorEmojiSupported(t))return n}catch(e){}return e[0][1]}const emojiSupportLevelPromise=new Promise((e=>rIC((()=>e(determineEmojiSupportLevel()))))),supportedZwjEmojis=new Map,VARIATION_SELECTOR="Ô∏è",SKINTONE_MODIFIER="\ud83c",ZWJ="‚Äç",LIGHT_SKIN_TONE=127995,LIGHT_SKIN_TONE_MODIFIER=57339;function applySkinTone(e,t){if(0===t)return e;const n=e.indexOf("‚Äç");return-1!==n?e.substring(0,n)+String.fromCodePoint(127995+t-1)+e.substring(n):(e.endsWith("Ô∏è")&&(e=e.substring(0,e.length-1)),e+"\ud83c"+String.fromCodePoint(57339+t-1))}function halt(e){e.preventDefault(),e.stopPropagation()}function incrementOrDecrement(e,t,n){return(t+=e?-1:1)<0?t=n.length-1:t>=n.length&&(t=0),t}function uniqBy(e,t){const n=new Set,o=[];for(const a of e){const e=t(a);n.has(e)||(n.add(e),o.push(a))}return o}function summarizeEmojisForUI(e,t){const n=e=>{const n={};for(const o of e)"number"==typeof o.tone&&o.version<=t&&(n[o.tone]=o.unicode);return n};return e.map((({unicode:e,skins:t,shortcodes:o,url:a,name:r,category:i})=>({unicode:e,name:r,shortcodes:o,url:a,category:i,id:e||r,skins:t&&n(t),title:(o||[]).join(", ")})))}const rAF=requestAnimationFrame;let baselineEmojiWidth,resizeObserverSupported="function"==typeof ResizeObserver;function calculateWidth(e,t){let n;return resizeObserverSupported?(n=new ResizeObserver((e=>t(e[0].contentRect.width))),n.observe(e)):rAF((()=>t(e.getBoundingClientRect().width))),{destroy(){n&&n.disconnect()}}}function calculateTextWidth(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}function checkZwjSupport(e,t,n){for(const o of e){const e=calculateTextWidth(n(o));void 0===baselineEmojiWidth&&(baselineEmojiWidth=calculateTextWidth(t));const a=e/1.8<baselineEmojiWidth;supportedZwjEmojis.set(o.unicode,a)}}const requestPostAnimationFrame=e=>{rAF((()=>{setTimeout(e)}))};function uniq(e){return uniqBy(e,(e=>e))}const{Map:Map_1}=globals;function get_each_context(e,t,n){const o=e.slice();return o[63]=t[n],o[65]=n,o}function get_each_context_1(e,t,n){const o=e.slice();return o[66]=t[n],o[65]=n,o}function get_each_context_2(e,t,n){const o=e.slice();return o[63]=t[n],o[65]=n,o}function get_each_context_3(e,t,n){const o=e.slice();return o[69]=t[n],o}function get_each_context_4(e,t,n){const o=e.slice();return o[72]=t[n],o[65]=n,o}function create_each_block_4(e,t){let n,o,a,r,i,s,c,l=t[72]+"";return{key:e,first:null,c(){n=element("div"),o=text(l),attr(n,"id",a="skintone-"+t[65]),attr(n,"class",r="emoji hide-focus "+(t[65]===t[20]?"active":"")),attr(n,"aria-selected",i=t[65]===t[20]),attr(n,"role","option"),attr(n,"title",s=t[0].skinTones[t[65]]),attr(n,"tabindex","-1"),attr(n,"aria-label",c=t[0].skinTones[t[65]]),this.first=n},m(e,t){insert(e,n,t),append(n,o)},p(e,d){t=e,512&d[0]&&l!==(l=t[72]+"")&&set_data(o,l),512&d[0]&&a!==(a="skintone-"+t[65])&&attr(n,"id",a),1049088&d[0]&&r!==(r="emoji hide-focus "+(t[65]===t[20]?"active":""))&&attr(n,"class",r),1049088&d[0]&&i!==(i=t[65]===t[20])&&attr(n,"aria-selected",i),513&d[0]&&s!==(s=t[0].skinTones[t[65]])&&attr(n,"title",s),513&d[0]&&c!==(c=t[0].skinTones[t[65]])&&attr(n,"aria-label",c)},d(e){e&&detach(n)}}}function create_each_block_3(e,t){let n,o,a,r,i,s,c,l,d,u=t[69].emoji+"";function p(){return t[49](t[69])}return{key:e,first:null,c(){n=element("button"),o=element("div"),a=text(u),attr(o,"class","nav-emoji emoji"),attr(n,"role","tab"),attr(n,"class","nav-button"),attr(n,"aria-controls",r="tab-"+t[69].id),attr(n,"aria-label",i=t[0].categories[t[69].name]),attr(n,"aria-selected",s=!t[4]&&t[13].id===t[69].id),attr(n,"title",c=t[0].categories[t[69].name]),this.first=n},m(e,t){insert(e,n,t),append(n,o),append(o,a),l||(d=listen(n,"click",p),l=!0)},p(e,o){t=e,4096&o[0]&&u!==(u=t[69].emoji+"")&&set_data(a,u),4096&o[0]&&r!==(r="tab-"+t[69].id)&&attr(n,"aria-controls",r),4097&o[0]&&i!==(i=t[0].categories[t[69].name])&&attr(n,"aria-label",i),12304&o[0]&&s!==(s=!t[4]&&t[13].id===t[69].id)&&attr(n,"aria-selected",s),4097&o[0]&&c!==(c=t[0].categories[t[69].name])&&attr(n,"title",c)},d(e){e&&detach(n),l=!1,d()}}}function create_else_block_1(e){let t,n;return{c(){t=element("img"),attr(t,"class","custom-emoji"),src_url_equal(t.src,n=e[63].url)||attr(t,"src",n),attr(t,"alt",""),attr(t,"loading","lazy")},m(e,n){insert(e,t,n)},p(e,o){32768&o[0]&&!src_url_equal(t.src,n=e[63].url)&&attr(t,"src",n)},d(e){e&&detach(t)}}}function create_if_block_1(e){let t,n=e[27](e[63],e[8])+"";return{c(){t=text(n)},m(e,n){insert(e,t,n)},p(e,o){33024&o[0]&&n!==(n=e[27](e[63],e[8])+"")&&set_data(t,n)},d(e){e&&detach(t)}}}function create_each_block_2(e,t){let n,o,a,r,i,s,c;function l(e,t){return e[63].unicode?create_if_block_1:create_else_block_1}let d=l(t),u=d(t);return{key:e,first:null,c(){n=element("button"),u.c(),attr(n,"role",o=t[4]?"option":"menuitem"),attr(n,"aria-selected",a=t[4]?t[65]==t[5]:""),attr(n,"aria-label",r=t[28](t[63],t[8])),attr(n,"title",i=t[63].title),attr(n,"class",s="emoji "+(t[4]&&t[65]===t[5]?"active":"")),attr(n,"id",c="emo-"+t[63].id),this.first=n},m(e,t){insert(e,n,t),u.m(n,null)},p(e,p){d===(d=l(t=e))&&u?u.p(t,p):(u.d(1),u=d(t),u&&(u.c(),u.m(n,null))),16&p[0]&&o!==(o=t[4]?"option":"menuitem")&&attr(n,"role",o),32816&p[0]&&a!==(a=t[4]?t[65]==t[5]:"")&&attr(n,"aria-selected",a),33024&p[0]&&r!==(r=t[28](t[63],t[8]))&&attr(n,"aria-label",r),32768&p[0]&&i!==(i=t[63].title)&&attr(n,"title",i),32816&p[0]&&s!==(s="emoji "+(t[4]&&t[65]===t[5]?"active":""))&&attr(n,"class",s),32768&p[0]&&c!==(c="emo-"+t[63].id)&&attr(n,"id",c)},d(e){e&&detach(n),u.d()}}}function create_each_block_1(e,t){let n,o,a,r,i,s,c,l,d=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"",u=[],p=new Map_1,m=t[66].emojis;const h=e=>e[63].id;for(let e=0;e<m.length;e+=1){let n=get_each_context_2(t,m,e),o=h(n);p.set(o,u[e]=create_each_block_2(o,n))}return{key:e,first:null,c(){n=element("div"),o=text(d),i=element("div");for(let e=0;e<u.length;e+=1)u[e].c();attr(n,"id",a="menu-label-"+t[65]),attr(n,"class",r="category "+(1===t[15].length&&""===t[15][0].category?"gone":"")),attr(n,"aria-hidden","true"),attr(i,"class","emoji-menu"),attr(i,"role",s=t[4]?"listbox":"menu"),attr(i,"aria-labelledby",c="menu-label-"+t[65]),attr(i,"id",l=t[4]?"search-results":""),this.first=n},m(e,t){insert(e,n,t),append(n,o),insert(e,i,t);for(let e=0;e<u.length;e+=1)u[e].m(i,null)},p(e,f){t=e,40977&f[0]&&d!==(d=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"")&&set_data(o,d),32768&f[0]&&a!==(a="menu-label-"+t[65])&&attr(n,"id",a),32768&f[0]&&r!==(r="category "+(1===t[15].length&&""===t[15][0].category?"gone":""))&&attr(n,"class",r),402686256&f[0]&&(m=t[66].emojis,u=update_keyed_each(u,f,h,1,t,m,p,i,destroy_block,create_each_block_2,null,get_each_context_2)),16&f[0]&&s!==(s=t[4]?"listbox":"menu")&&attr(i,"role",s),32768&f[0]&&c!==(c="menu-label-"+t[65])&&attr(i,"aria-labelledby",c),16&f[0]&&l!==(l=t[4]?"search-results":"")&&attr(i,"id",l)},d(e){e&&detach(n),e&&detach(i);for(let e=0;e<u.length;e+=1)u[e].d()}}}function create_else_block(e){let t,n;return{c(){t=element("img"),attr(t,"class","custom-emoji"),src_url_equal(t.src,n=e[63].url)||attr(t,"src",n),attr(t,"alt",""),attr(t,"loading","lazy")},m(e,n){insert(e,t,n)},p(e,o){1024&o[0]&&!src_url_equal(t.src,n=e[63].url)&&attr(t,"src",n)},d(e){e&&detach(t)}}}function create_if_block(e){let t,n=e[27](e[63],e[8])+"";return{c(){t=text(n)},m(e,n){insert(e,t,n)},p(e,o){1280&o[0]&&n!==(n=e[27](e[63],e[8])+"")&&set_data(t,n)},d(e){e&&detach(t)}}}function create_each_block(e,t){let n,o,a,r;function i(e,t){return e[63].unicode?create_if_block:create_else_block}let s=i(t),c=s(t);return{key:e,first:null,c(){n=element("button"),c.c(),attr(n,"role","menuitem"),attr(n,"aria-label",o=t[28](t[63],t[8])),attr(n,"title",a=t[63].title),attr(n,"class","emoji"),attr(n,"id",r="fav-"+t[63].id),this.first=n},m(e,t){insert(e,n,t),c.m(n,null)},p(e,l){s===(s=i(t=e))&&c?c.p(t,l):(c.d(1),c=s(t),c&&(c.c(),c.m(n,null))),1280&l[0]&&o!==(o=t[28](t[63],t[8]))&&attr(n,"aria-label",o),1024&l[0]&&a!==(a=t[63].title)&&attr(n,"title",a),1024&l[0]&&r!==(r="fav-"+t[63].id)&&attr(n,"id",r)},d(e){e&&detach(n),c.d()}}}function create_fragment(e){let t,n,o,a,r,i,s,c,l,d,u,p,m,h,f,_,b,g,y,k,v,j,w,x,E,$,T,S,L,C,O,z,A,M,I,F,D,N,P,R,U,q,B,G,W=e[0].searchLabel+"",Y=e[0].searchDescription+"",Z=e[0].skinToneDescription+"",H=[],K=new Map_1,J=[],V=new Map_1,X=[],Q=new Map_1,ee=[],te=new Map_1,ne=e[9];const oe=e=>e[72];for(let t=0;t<ne.length;t+=1){let n=get_each_context_4(e,ne,t),o=oe(n);K.set(o,H[t]=create_each_block_4(o,n))}let ae=e[12];const re=e=>e[69].id;for(let t=0;t<ae.length;t+=1){let n=get_each_context_3(e,ae,t),o=re(n);V.set(o,J[t]=create_each_block_3(o,n))}let ie=e[15];const se=e=>e[66].category;for(let t=0;t<ie.length;t+=1){let n=get_each_context_1(e,ie,t),o=se(n);Q.set(o,X[t]=create_each_block_1(o,n))}let ce=e[10];const le=e=>e[63].id;for(let t=0;t<ce.length;t+=1){let n=get_each_context(e,ce,t),o=le(n);te.set(o,ee[t]=create_each_block(o,n))}return{c(){t=element("section"),n=element("div"),o=element("div"),a=element("div"),r=element("input"),l=element("label"),d=text(W),u=element("span"),p=text(Y),m=element("div"),h=element("button"),f=text(e[21]),g=element("span"),y=text(Z),k=element("div");for(let e=0;e<H.length;e+=1)H[e].c();E=element("div");for(let e=0;e<J.length;e+=1)J[e].c();T=element("div"),S=element("div"),L=element("div"),C=text(e[18]),z=element("div"),A=element("div");for(let e=0;e<X.length;e+=1)X[e].c();N=element("div");for(let e=0;e<ee.length;e+=1)ee[e].c();U=element("button"),U.textContent="üòÄ",attr(n,"class","pad-top"),attr(r,"id","search"),attr(r,"class","search"),attr(r,"type","search"),attr(r,"role","combobox"),attr(r,"enterkeyhint","search"),attr(r,"placeholder",i=e[0].searchLabel),attr(r,"autocapitalize","none"),attr(r,"autocomplete","off"),attr(r,"spellcheck","true"),attr(r,"aria-expanded",s=!(!e[4]||!e[1].length)),attr(r,"aria-controls","search-results"),attr(r,"aria-owns","search-results"),attr(r,"aria-describedby","search-description"),attr(r,"aria-autocomplete","list"),attr(r,"aria-activedescendant",c=e[26]?`emo-${e[26]}`:""),attr(l,"class","sr-only"),attr(l,"for","search"),attr(u,"id","search-description"),attr(u,"class","sr-only"),attr(a,"class","search-wrapper"),attr(h,"id","skintone-button"),attr(h,"class",_="emoji "+(e[6]?"hide-focus":"")),attr(h,"aria-label",e[23]),attr(h,"title",e[23]),attr(h,"aria-describedby","skintone-description"),attr(h,"aria-haspopup","listbox"),attr(h,"aria-expanded",e[6]),attr(h,"aria-controls","skintone-list"),attr(m,"class",b="skintone-button-wrapper "+(e[19]?"expanded":"")),attr(g,"id","skintone-description"),attr(g,"class","sr-only"),attr(k,"id","skintone-list"),attr(k,"class",v="skintone-list "+(e[6]?"":"hidden no-animate")),set_style(k,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),attr(k,"role","listbox"),attr(k,"aria-label",j=e[0].skinTonesLabel),attr(k,"aria-activedescendant",w="skintone-"+e[20]),attr(k,"aria-hidden",x=!e[6]),attr(o,"class","search-row"),attr(E,"class","nav"),attr(E,"role","tablist"),set_style(E,"grid-template-columns","repeat("+e[12].length+", 1fr)"),attr(E,"aria-label",$=e[0].categoriesLabel),attr(S,"class","indicator"),set_style(S,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),attr(T,"class","indicator-wrapper"),attr(L,"class",O="message "+(e[18]?"":"gone")),attr(L,"role","alert"),attr(L,"aria-live","polite"),attr(z,"class",M="tabpanel "+(!e[14]||e[18]?"gone":"")),attr(z,"role",I=e[4]?"region":"tabpanel"),attr(z,"aria-label",F=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name]),attr(z,"id",D=e[4]?"":`tab-${e[13].id}`),attr(z,"tabindex","0"),attr(N,"class",P="favorites emoji-menu "+(e[18]?"gone":"")),attr(N,"role","menu"),attr(N,"aria-label",R=e[0].favoritesLabel),set_style(N,"padding-inline-end",e[25]+"px"),attr(U,"aria-hidden","true"),attr(U,"tabindex","-1"),attr(U,"class","abs-pos hidden emoji"),attr(t,"class","picker"),attr(t,"aria-label",q=e[0].regionLabel),attr(t,"style",e[22])},m(i,s){insert(i,t,s),append(t,n),append(t,o),append(o,a),append(a,r),set_input_value(r,e[2]),append(a,l),append(l,d),append(a,u),append(u,p),append(o,m),append(m,h),append(h,f),append(o,g),append(g,y),append(o,k);for(let e=0;e<H.length;e+=1)H[e].m(k,null);e[48](k),append(t,E);for(let e=0;e<J.length;e+=1)J[e].m(E,null);append(t,T),append(T,S),append(t,L),append(L,C),append(t,z),append(z,A);for(let e=0;e<X.length;e+=1)X[e].m(A,null);e[50](z),append(t,N);for(let e=0;e<ee.length;e+=1)ee[e].m(N,null);append(t,U),e[51](U),e[52](t),B||(G=[listen(r,"input",e[47]),listen(r,"keydown",e[30]),listen(h,"click",e[35]),listen(k,"focusout",e[38]),listen(k,"click",e[34]),listen(k,"keydown",e[36]),listen(k,"keyup",e[37]),listen(E,"keydown",e[32]),action_destroyer(e[29].call(null,A)),listen(z,"click",e[33]),listen(N,"click",e[33])],B=!0)},p(e,n){1&n[0]&&i!==(i=e[0].searchLabel)&&attr(r,"placeholder",i),18&n[0]&&s!==(s=!(!e[4]||!e[1].length))&&attr(r,"aria-expanded",s),67108864&n[0]&&c!==(c=e[26]?`emo-${e[26]}`:"")&&attr(r,"aria-activedescendant",c),4&n[0]&&set_input_value(r,e[2]),1&n[0]&&W!==(W=e[0].searchLabel+"")&&set_data(d,W),1&n[0]&&Y!==(Y=e[0].searchDescription+"")&&set_data(p,Y),2097152&n[0]&&set_data(f,e[21]),64&n[0]&&_!==(_="emoji "+(e[6]?"hide-focus":""))&&attr(h,"class",_),8388608&n[0]&&attr(h,"aria-label",e[23]),8388608&n[0]&&attr(h,"title",e[23]),64&n[0]&&attr(h,"aria-expanded",e[6]),524288&n[0]&&b!==(b="skintone-button-wrapper "+(e[19]?"expanded":""))&&attr(m,"class",b),1&n[0]&&Z!==(Z=e[0].skinToneDescription+"")&&set_data(y,Z),1049089&n[0]&&(ne=e[9],H=update_keyed_each(H,n,oe,1,e,ne,K,k,destroy_block,create_each_block_4,null,get_each_context_4)),64&n[0]&&v!==(v="skintone-list "+(e[6]?"":"hidden no-animate"))&&attr(k,"class",v),64&n[0]&&set_style(k,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),1&n[0]&&j!==(j=e[0].skinTonesLabel)&&attr(k,"aria-label",j),1048576&n[0]&&w!==(w="skintone-"+e[20])&&attr(k,"aria-activedescendant",w),64&n[0]&&x!==(x=!e[6])&&attr(k,"aria-hidden",x),12305&n[0]|1&n[1]&&(ae=e[12],J=update_keyed_each(J,n,re,1,e,ae,V,E,destroy_block,create_each_block_3,null,get_each_context_3)),4096&n[0]&&set_style(E,"grid-template-columns","repeat("+e[12].length+", 1fr)"),1&n[0]&&$!==($=e[0].categoriesLabel)&&attr(E,"aria-label",$),16779264&n[0]&&set_style(S,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),262144&n[0]&&set_data(C,e[18]),262144&n[0]&&O!==(O="message "+(e[18]?"":"gone"))&&attr(L,"class",O),402694449&n[0]&&(ie=e[15],X=update_keyed_each(X,n,se,1,e,ie,Q,A,destroy_block,create_each_block_1,null,get_each_context_1)),278528&n[0]&&M!==(M="tabpanel "+(!e[14]||e[18]?"gone":""))&&attr(z,"class",M),16&n[0]&&I!==(I=e[4]?"region":"tabpanel")&&attr(z,"role",I),8209&n[0]&&F!==(F=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name])&&attr(z,"aria-label",F),8208&n[0]&&D!==(D=e[4]?"":`tab-${e[13].id}`)&&attr(z,"id",D),402654464&n[0]&&(ce=e[10],ee=update_keyed_each(ee,n,le,1,e,ce,te,N,destroy_block,create_each_block,null,get_each_context)),262144&n[0]&&P!==(P="favorites emoji-menu "+(e[18]?"gone":""))&&attr(N,"class",P),1&n[0]&&R!==(R=e[0].favoritesLabel)&&attr(N,"aria-label",R),33554432&n[0]&&set_style(N,"padding-inline-end",e[25]+"px"),1&n[0]&&q!==(q=e[0].regionLabel)&&attr(t,"aria-label",q),4194304&n[0]&&attr(t,"style",e[22])},i:noop,o:noop,d(n){n&&detach(t);for(let e=0;e<H.length;e+=1)H[e].d();e[48](null);for(let e=0;e<J.length;e+=1)J[e].d();for(let e=0;e<X.length;e+=1)X[e].d();e[50](null);for(let e=0;e<ee.length;e+=1)ee[e].d();e[51](null),e[52](null),B=!1,run_all(G)}}}function instance(e,t,n){let o,a,r,i,s,c,l,d,u,p,{skinToneEmoji:m}=t,{i18n:h}=t,{database:f}=t,{customEmoji:_}=t,{customCategorySorting:b}=t,g=!0,y=[],k=[],v="",j="",w=!1,x=-1,E=!1,$=!1,T=0,S=0,L="",C=[],O=[],z=8,A=!1,M=0,I=0,F=groups,D=!1;const N=e=>{o.getRootNode().getElementById(e).focus()},P=(e,t)=>{o.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))},R=(e,t)=>t&&e.skins&&e.skins[t]||e.unicode,U=e=>/^skintone-/.test(e.id);function q(e){return!e.unicode||!hasZwj(e)||supportedZwjEmojis.get(e.unicode)}async function B(e){const t=await emojiSupportLevelPromise;return e.filter((({version:e})=>!e||e<=t))}async function G(e){return summarizeEmojisForUI(e,await emojiSupportLevelPromise)}function W(e){n(2,v=""),n(44,j=""),n(5,x=-1),n(11,I=F.findIndex((t=>t.id===e.id)))}async function Y(e){const t=await f.getEmojiByUnicodeOrName(e),n=[...y,...O].find((t=>t.id===e)),o=n.unicode&&R(n,T);await f.incrementFavoriteEmojiCount(e),P("emoji-click",{emoji:t,skinTone:T,...o&&{unicode:o},...n.name&&{name:n.name}})}async function Z(e){const{target:t}=e;if(!U(t))return;halt(e);const o=parseInt(t.id.slice(9),10);n(8,T=o),n(6,E=!1),N("skintone-button"),P("skin-tone-change",{skinTone:o}),f.setPreferredSkinTone(o)}emojiSupportLevelPromise.then((e=>{e||n(18,i=h.emojiUnsupportedMessage)}));return e.$$set=e=>{"skinToneEmoji"in e&&n(40,m=e.skinToneEmoji),"i18n"in e&&n(0,h=e.i18n),"database"in e&&n(39,f=e.database),"customEmoji"in e&&n(41,_=e.customEmoji),"customCategorySorting"in e&&n(42,b=e.customCategorySorting)},e.$$.update=()=>{if(1280&e.$$.dirty[1]&&_&&f&&n(39,f.customEmoji=_,f),1&e.$$.dirty[0]|256&e.$$.dirty[1]){f&&async function(){let e=!1;const t=setTimeout((()=>{e=!0,n(18,i=h.loadingMessage)}),1e3);try{await f.ready(),n(14,D=!0)}catch(e){console.error(e),n(18,i=h.networkErrorMessage)}finally{clearTimeout(t),e&&(e=!1,n(18,i=""))}}()}if(4096&e.$$.dirty[0]|1024&e.$$.dirty[1]&&(_&&_.length?n(12,F=[customGroup,...groups]):F!==groups&&n(12,F=groups)),4&e.$$.dirty[0]&&rIC((()=>{n(44,j=(v||"").trim()),n(5,x=-1)})),6144&e.$$.dirty[0]&&n(13,u=F[I]),24576&e.$$.dirty[0]|8192&e.$$.dirty[1]){!async function(){if(D){if(j.length>=2){const e=j,t=await async function(e){return G(await B(await f.getEmojiBySearchQuery(e)))}(e);e===j&&(n(1,y=t),n(4,w=!0))}else if(u){const e=u.id,t=await async function(e){if(void 0===e)return[];const t=-1===e?_:await f.getEmojiByGroup(e);return G(await B(t))}(e);e===u.id&&(n(1,y=t),n(4,w=!1))}}else n(1,y=[]),n(4,w=!1)}()}if(4112&e.$$.dirty[0]&&n(22,l=`\n  --font-family: ${FONT_FAMILY};\n  --num-groups: ${F.length}; \n  --indicator-opacity: ${w?0:1}; \n  --num-skintones: 6;`),16384&e.$$.dirty[0]|256&e.$$.dirty[1]){!async function(){D&&n(8,T=await f.getPreferredSkinTone())}()}if(512&e.$$.dirty[1]&&n(9,C=Array(6).fill().map(((e,t)=>applySkinTone(m,t)))),768&e.$$.dirty[0]&&n(21,c=C[T]),257&e.$$.dirty[0]&&n(23,L=h.skinToneLabel.replace("{skinTone}",h.skinTones[T])),16384&e.$$.dirty[0]|256&e.$$.dirty[1]){D&&async function(){n(45,d=(await Promise.all(MOST_COMMONLY_USED_EMOJI.map((e=>f.getEmojiByUnicodeOrName(e))))).filter(Boolean))}()}if(16384&e.$$.dirty[0]|49408&e.$$.dirty[1]){D&&d&&async function(){const e=await f.getTopFavoriteEmoji(z),t=await G(uniqBy([...e,...d],(e=>e.unicode||e.name)).slice(0,z));n(10,O=t)}()}if(10&e.$$.dirty[0]){const e=y.filter((e=>e.unicode)).filter((e=>hasZwj(e)&&!supportedZwjEmojis.has(e.unicode)));e.length?rAF((()=>function(e){const t=o.getRootNode();checkZwjSupport(e,a,(e=>t.getElementById(`emo-${e.id}`))),n(1,y)}(e))):(n(1,y=y.filter(q)),rAF((()=>{(r||{}).scrollTop=0})))}if(e.$$.dirty[0],e.$$.dirty[1],18&e.$$.dirty[0]|2048&e.$$.dirty[1]){n(15,k=function(){if(w)return[{category:"",emojis:y}];const e=new Map;for(const t of y){const n=t.category||"";let o=e.get(n);o||(o=[],e.set(n,o)),o.push(t)}return[...e.entries()].map((([e,t])=>({category:e,emojis:t}))).sort(((e,t)=>b(e.category,t.category)))}())}34&e.$$.dirty[0]&&n(26,p=-1!==x&&y[x].id),192&e.$$.dirty[0]&&(E?s.addEventListener("transitionend",(()=>{n(19,$=!0)}),{once:!0}):n(19,$=!1))},[h,y,v,r,w,x,E,s,T,C,O,I,F,u,D,k,o,a,i,$,S,c,l,L,A,M,p,R,(e,t)=>uniq([e.name||R(e,t),...e.shortcodes||[]]).join(", "),function(e){return calculateWidth(e,(t=>{{const a=getComputedStyle(o),r=parseInt(a.getPropertyValue("--num-columns"),10),i="rtl"===a.getPropertyValue("direction"),s=e.parentElement.getBoundingClientRect().width-t;n(46,z=r),n(25,M=s),n(24,A=i)}}))},function(e){if(!w||!y.length)return;const t=t=>{halt(e),n(5,x=incrementOrDecrement(t,x,y))};switch(e.key){case"ArrowDown":return t(!1);case"ArrowUp":return t(!0);case"Enter":if(-1!==x)return halt(e),Y(y[x].id);y.length&&n(5,x=0)}},W,function(e){const{target:t,key:n}=e,o=t=>{t&&(halt(e),t.focus())};switch(n){case"ArrowLeft":return o(t.previousSibling);case"ArrowRight":return o(t.nextSibling);case"Home":return o(t.parentElement.firstChild);case"End":return o(t.parentElement.lastChild)}},async function(e){const{target:t}=e;if(!t.classList.contains("emoji"))return;halt(e),Y(t.id.substring(4))},Z,async function(e){n(6,E=!E),n(20,S=T),E&&(halt(e),rAF((()=>N(`skintone-${S}`))))},function(e){if(!E)return;const t=async t=>{halt(e),n(20,S=t),await tick(),N(`skintone-${S}`)};switch(e.key){case"ArrowUp":return t(incrementOrDecrement(!0,S,C));case"ArrowDown":return t(incrementOrDecrement(!1,S,C));case"Home":return t(0);case"End":return t(C.length-1);case"Enter":return Z(e);case"Escape":return halt(e),n(6,E=!1),N("skintone-button")}},function(e){if(E)return" "===e.key?Z(e):void 0},async function(e){const{relatedTarget:t}=e;t&&U(t)||n(6,E=!1)},f,m,_,b,g,j,d,z,function(){v=this.value,n(2,v)},function(e){binding_callbacks[e?"unshift":"push"]((()=>{s=e,n(7,s)}))},e=>W(e),function(e){binding_callbacks[e?"unshift":"push"]((()=>{r=e,n(3,r)}))},function(e){binding_callbacks[e?"unshift":"push"]((()=>{a=e,n(17,a)}))},function(e){binding_callbacks[e?"unshift":"push"]((()=>{o=e,n(16,o)}))}]}class Picker extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42},null,[-1,-1,-1])}}const DEFAULT_DATA_SOURCE="./common/emoji-picker/data.json",DEFAULT_LOCALE="en";var enI18n={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does /static/libs/emoji-pickerhttps://test.biihappy.com/static/libs/emo ji-picker/static/libs/emoji-picker/static/libs/emo ji-picker/static/libs/emoji-picker/not oji.",favoritesLabel:"Favorites",loadingMessage:"Loading‚Ä¶",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const PROPS=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji"];class PickerElement extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});const t=document.createElement("style");t.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover)and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}",this.shadowRoot.appendChild(t),this._ctx={locale:"en",dataSource:DEFAULT_DATA_SOURCE,skinToneEmoji:"üñêÔ∏è",customCategorySorting:DEFAULT_CATEGORY_SORTING,customEmoji:null,i18n:enI18n,...e};for(const e of PROPS)"database"!==e&&Object.prototype.hasOwnProperty.call(this,e)&&(this._ctx[e]=this[e],delete this[e]);this._dbFlush()}connectedCallback(){this._cmp=new Picker({target:this.shadowRoot,props:this._ctx})}disconnectedCallback(){this._cmp.$destroy(),this._cmp=void 0;const{database:e}=this._ctx;e&&e.close().catch((e=>console.error(e)))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji"]}attributeChangedCallback(e,t,n){this._set(e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase())),n)}_set(e,t){this._ctx[e]=t,this._cmp&&this._cmp.$set({[e]:t}),["locale","dataSource"].includes(e)&&this._dbFlush()}_dbCreate(){const{locale:e,dataSource:t,database:n}=this._ctx;n&&n.locale===e&&n.dataSource===t||this._set("database",new Database({locale:e,dataSource:t}))}_dbFlush(){Promise.resolve().then((()=>this._dbCreate()))}}const definitions={};for(const e of PROPS)definitions[e]={get(){return"database"===e&&this._dbCreate(),this._ctx[e]},set(t){if("database"===e)throw new Error("database is read-only");this._set(e,t)}};Object.defineProperties(PickerElement.prototype,definitions),customElements.get("emoji-picker")||customElements.define("emoji-picker",PickerElement);export default PickerElement;